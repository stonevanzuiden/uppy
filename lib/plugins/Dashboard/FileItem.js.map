{"version":3,"sources":["../../../src/plugins/Dashboard/FileItem.js"],"names":["require","getETA","getSpeed","prettyETA","getFileNameAndExtension","truncateString","copyToClipboard","prettyBytes","FileItemProgress","getFileTypeIcon","iconEdit","iconCopy","module","exports","fileItem","props","file","acquirers","isUploaded","progress","uploadComplete","uploadInProgressOrComplete","uploadStarted","uploadInProgress","isPaused","fileName","meta","name","truncatedFileName","isWide","id","resumableUploads","source","map","acquirer","icon","preview","type","general","specific","color","ev","pauseUpload","cancelUpload","percentage","fileID","showProgressDetails","i18n","uploadURL","extension","data","size","e","showFileCard","then","log","info","catch","removeFile"],"mappings":"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","file":"FileItem.js","sourcesContent":["const html = require('yo-yo')\nconst { getETA,\n         getSpeed,\n         prettyETA,\n         getFileNameAndExtension,\n         truncateString,\n         copyToClipboard } = require('../../core/Utils')\nconst prettyBytes = require('prettier-bytes')\nconst FileItemProgress = require('./FileItemProgress')\nconst getFileTypeIcon = require('./getFileTypeIcon')\nconst { iconEdit, iconCopy } = require('./icons')\n\nmodule.exports = function fileItem (props) {\n  const file = props.file\n  const acquirers = props.acquirers\n\n  const isUploaded = file.progress.uploadComplete\n  const uploadInProgressOrComplete = file.progress.uploadStarted\n  const uploadInProgress = file.progress.uploadStarted && !file.progress.uploadComplete\n  const isPaused = file.isPaused || false\n\n  const fileName = getFileNameAndExtension(file.meta.name)[0]\n  const truncatedFileName = props.isWide ? truncateString(fileName, 15) : fileName\n\n  return html`<li class=\"UppyDashboardItem\n                        ${uploadInProgress ? 'is-inprogress' : ''}\n                        ${isUploaded ? 'is-complete' : ''}\n                        ${isPaused ? 'is-paused' : ''}\n                        ${props.resumableUploads ? 'is-resumable' : ''}\"\n                  id=\"uppy_${file.id}\"\n                  title=\"${file.meta.name}\">\n      <div class=\"UppyDashboardItem-preview\">\n        ${file.source\n          ? html`<div class=\"UppyDashboardItem-sourceIcon\">\n            ${acquirers.map(acquirer => {\n              if (acquirer.id === file.source) return html`<span title=\"${acquirer.name}\">${acquirer.icon()}</span>`\n            })}\n          </div>`\n          : ''\n        }\n        ${file.preview\n          ? html`<img alt=\"${file.name}\" src=\"${file.preview}\">`\n          : html`<div class=\"UppyDashboardItem-previewIcon\" style=\"color: ${getFileTypeIcon(file.type.general, file.type.specific).color}\">\n              ${getFileTypeIcon(file.type.general, file.type.specific).icon}\n            </div>`\n        }\n        <div class=\"UppyDashboardItem-progress\">\n          <button class=\"UppyDashboardItem-progressBtn\"\n                  title=\"${isUploaded\n                          ? 'upload complete'\n                          : props.resumableUploads\n                            ? file.isPaused\n                              ? 'resume upload'\n                              : 'pause upload'\n                            : 'cancel upload'\n                        }\"\n                  onclick=${(ev) => {\n                    if (isUploaded) return\n                    if (props.resumableUploads) {\n                      props.pauseUpload(file.id)\n                    } else {\n                      props.cancelUpload(file.id)\n                    }\n                  }}>\n            ${FileItemProgress({\n              progress: file.progress.percentage,\n              fileID: file.id\n            })}\n          </button>\n          ${props.showProgressDetails\n            ? html`<div class=\"UppyDashboardItem-progressInfo\"\n                        title=\"${props.i18n('fileProgress')}\"\n                        aria-label=\"${props.i18n('fileProgress')}\">\n                ${!file.isPaused && !isUploaded\n                  ? html`<span>${prettyETA(getETA(file.progress))} ・ ↑ ${prettyBytes(getSpeed(file.progress))}/s</span>`\n                  : null\n                }\n              </div>`\n            : null\n          }\n        </div>\n      </div>\n    <div class=\"UppyDashboardItem-info\">\n      <h4 class=\"UppyDashboardItem-name\" title=\"${fileName}\">\n        ${file.uploadURL\n          ? html`<a href=\"${file.uploadURL}\" target=\"_blank\">\n              ${file.extension ? truncatedFileName + '.' + file.extension : truncatedFileName}\n            </a>`\n          : file.extension ? truncatedFileName + '.' + file.extension : truncatedFileName\n        }\n      </h4>\n      <div class=\"UppyDashboardItem-status\">\n        <span class=\"UppyDashboardItem-statusSize\">${file.data.size ? prettyBytes(file.data.size) : '?'}</span>\n      </div>\n      ${!uploadInProgressOrComplete\n        ? html`<button class=\"UppyDashboardItem-edit\"\n                       aria-label=\"Edit file\"\n                       title=\"Edit file\"\n                       onclick=${(e) => props.showFileCard(file.id)}>\n                        ${iconEdit()}</button>`\n        : null\n      }\n      ${file.uploadURL\n        ? html`<button class=\"UppyDashboardItem-copyLink\"\n                       aria-label=\"Copy link\"\n                       title=\"Copy link\"\n                       onclick=${() => {\n                         copyToClipboard(file.uploadURL, props.i18n('copyLinkToClipboardFallback'))\n                          .then(() => {\n                            props.log('Link copied to clipboard.')\n                            props.info(props.i18n('copyLinkToClipboardSuccess'), 'info', 3000)\n                          })\n                          .catch(props.log)\n                       }}>${iconCopy()}</button>`\n        : null\n      }\n    </div>\n    <div class=\"UppyDashboardItem-action\">\n      ${!isUploaded\n        ? html`<button class=\"UppyDashboardItem-remove\"\n                       aria-label=\"Remove file\"\n                       title=\"Remove file\"\n                       onclick=${() => props.removeFile(file.id)}>\n                 <svg class=\"UppyIcon\" width=\"22\" height=\"21\" viewBox=\"0 0 18 17\">\n                   <ellipse cx=\"8.62\" cy=\"8.383\" rx=\"8.62\" ry=\"8.383\"/>\n                   <path stroke=\"#FFF\" fill=\"#FFF\" d=\"M11 6.147L10.85 6 8.5 8.284 6.15 6 6 6.147 8.35 8.43 6 10.717l.15.146L8.5 8.578l2.35 2.284.15-.146L8.65 8.43z\"/>\n                 </svg>\n               </button>`\n        : null\n      }\n    </div>\n  </li>`\n}\n"]}