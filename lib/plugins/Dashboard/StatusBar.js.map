{"version":3,"sources":["../../../src/plugins/Dashboard/StatusBar.js"],"names":["throttle","require","progressBarWidth","props","totalProgress","progressDetails","complete","inProgress","totalUploadedSize","totalSize","totalSpeed","totalETA","throttledProgressDetails","leading","trailing","module","exports","isHidden","totalFileCount","isUploadStarted","isAllComplete","isAllPaused","pauseResumeButtons","title","resumableUploads","togglePauseResume","cancelAll","resumeAll","pauseAll"],"mappings":";;;;;AACA,IAAMA,WAAWC,QAAQ,iBAAR,CAAjB;;AAEA,SAASC,gBAAT,CAA2BC,KAA3B,EAAkC;AAChC,SAAOA,MAAMC,aAAb;AACD;;AAED,SAASC,eAAT,CAA0BF,KAA1B,EAAiC;AAAA;;AAC/B;AACA,sEAAoBA,MAAMC,aAAN,IAAuB,CAA3C,aAAiDD,MAAMG,QAAvD,SAAqEH,MAAMI,UAA3E,YAAyFJ,MAAMK,iBAA/F,SAAsHL,MAAMM,SAA5H,mBAA2IN,MAAMO,UAAjJ,cAAiKP,MAAMQ,QAAvK;AACD;;AAED,IAAMC,2BAA2BZ,SAASK,eAAT,EAA0B,IAA1B,EAAgC,EAACQ,SAAS,IAAV,EAAgBC,UAAU,IAA1B,EAAhC,CAAjC;AACA;;AAEAC,OAAOC,OAAP,GAAiB,UAACb,KAAD,EAAW;AAAA;;AAC1BA,UAAQA,SAAS,EAAjB;;AAEA,MAAMc,WAAWd,MAAMe,cAAN,KAAyB,CAAzB,IAA8B,CAACf,MAAMgB,eAAtD;;AAEA,4FAG6BF,QAH7B,yHAEgBd,MAAMiB,aAAN,GAAsB,aAAtB,GAAsC,EAFtD,4PAKgEjB,MAAMC,aALtE,qKAMiEF,iBAAiBC,KAAjB,CANjE,uVAQQA,MAAMgB,eAAN,IAAyB,CAAChB,MAAMiB,aAAhC,GACE,CAACjB,MAAMkB,WAAP,8GACiCC,mBAAmBnB,KAAnB,CADjC,oBAC2ES,yBAAyBT,KAAzB,CAD3E,sHAE8BmB,mBAAmBnB,KAAnB,CAF9B,mBAEkEA,MAAMC,aAFxE,gBADF,GAIE,IAZV,OAcQD,MAAMiB,aAAN,kuBAG0BjB,MAAMC,aAHhC,mBAIE,IAlBV;AAuBD,CA5BD;;AA8BA,IAAMkB,qBAAqB,SAArBA,kBAAqB,CAACnB,KAAD,EAAW;AAAA;;AACpC,MAAMoB,QAAQpB,MAAMqB,gBAAN,GACErB,MAAMkB,WAAN,GACE,eADF,GAEE,cAHJ,GAIE,eAJhB;;AAMA,6IAA6BE,KAA7B,iHAAmG;AAAA,WAAME,kBAAkBtB,KAAlB,CAAN;AAAA,GAAnG,4IACIA,MAAMqB,gBAAN,GACErB,MAAMkB,WAAN,wqCADF,i3BADJ;AAcD,CArBD;;AAuBA,IAAMI,oBAAoB,SAApBA,iBAAoB,CAACtB,KAAD,EAAW;AACnC,MAAIA,MAAMiB,aAAV,EAAyB;;AAEzB,MAAI,CAACjB,MAAMqB,gBAAX,EAA6B;AAC3B,WAAOrB,MAAMuB,SAAN,EAAP;AACD;;AAED,MAAIvB,MAAMkB,WAAV,EAAuB;AACrB,WAAOlB,MAAMwB,SAAN,EAAP;AACD;;AAED,SAAOxB,MAAMyB,QAAN,EAAP;AACD,CAZD","file":"StatusBar.js","sourcesContent":["const html = require('yo-yo')\nconst throttle = require('lodash.throttle')\n\nfunction progressBarWidth (props) {\n  return props.totalProgress\n}\n\nfunction progressDetails (props) {\n  // console.log(Date.now())\n  return html`<span>${props.totalProgress || 0}%・${props.complete} / ${props.inProgress}・${props.totalUploadedSize} / ${props.totalSize}・↑ ${props.totalSpeed}/s・${props.totalETA}</span>`\n}\n\nconst throttledProgressDetails = throttle(progressDetails, 1000, {leading: true, trailing: true})\n// const throttledProgressBarWidth = throttle(progressBarWidth, 300, {leading: true, trailing: true})\n\nmodule.exports = (props) => {\n  props = props || {}\n\n  const isHidden = props.totalFileCount === 0 || !props.isUploadStarted\n\n  return html`\n    <div class=\"UppyDashboard-statusBar\n                ${props.isAllComplete ? 'is-complete' : ''}\"\n                aria-hidden=\"${isHidden}\"\n                title=\"\">\n      <progress style=\"display: none;\" min=\"0\" max=\"100\" value=\"${props.totalProgress}\"></progress>\n      <div class=\"UppyDashboard-statusBarProgress\" style=\"width: ${progressBarWidth(props)}%\"></div>\n      <div class=\"UppyDashboard-statusBarContent\">\n        ${props.isUploadStarted && !props.isAllComplete\n          ? !props.isAllPaused\n            ? html`<span title=\"Uploading\">${pauseResumeButtons(props)} Uploading... ${throttledProgressDetails(props)}</span>`\n            : html`<span title=\"Paused\">${pauseResumeButtons(props)} Paused・${props.totalProgress}%</span>`\n          : null\n          }\n        ${props.isAllComplete\n          ? html`<span title=\"Complete\"><svg class=\"UppyDashboard-statusBarAction UppyIcon\" width=\"18\" height=\"17\" viewBox=\"0 0 23 17\">\n              <path d=\"M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z\" />\n            </svg>Upload complete・${props.totalProgress}%</span>`\n          : null\n        }\n      </div>\n    </div>\n  `\n}\n\nconst pauseResumeButtons = (props) => {\n  const title = props.resumableUploads\n                ? props.isAllPaused\n                  ? 'resume upload'\n                  : 'pause upload'\n                : 'cancel upload'\n\n  return html`<button title=\"${title}\" class=\"UppyDashboard-statusBarAction\" type=\"button\" onclick=${() => togglePauseResume(props)}>\n    ${props.resumableUploads\n      ? props.isAllPaused\n        ? html`<svg class=\"UppyIcon\" width=\"15\" height=\"17\" viewBox=\"0 0 11 13\">\n          <path d=\"M1.26 12.534a.67.67 0 0 1-.674.012.67.67 0 0 1-.336-.583v-11C.25.724.38.5.586.382a.658.658 0 0 1 .673.012l9.165 5.5a.66.66 0 0 1 .325.57.66.66 0 0 1-.325.573l-9.166 5.5z\" />\n        </svg>`\n        : html`<svg class=\"UppyIcon\" width=\"16\" height=\"17\" viewBox=\"0 0 12 13\">\n          <path d=\"M4.888.81v11.38c0 .446-.324.81-.722.81H2.722C2.324 13 2 12.636 2 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81zM9.888.81v11.38c0 .446-.324.81-.722.81H7.722C7.324 13 7 12.636 7 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81z\"/>\n        </svg>`\n      : html`<svg class=\"UppyIcon\" width=\"16px\" height=\"16px\" viewBox=\"0 0 19 19\">\n        <path d=\"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z\"/>\n      </svg>`\n    }\n  </button>`\n}\n\nconst togglePauseResume = (props) => {\n  if (props.isAllComplete) return\n\n  if (!props.resumableUploads) {\n    return props.cancelAll()\n  }\n\n  if (props.isAllPaused) {\n    return props.resumeAll()\n  }\n\n  return props.pauseAll()\n}\n"]}